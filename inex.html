<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>MAP673 Lesson 06 Solution</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: black;
        }
        #map {
            height: 100vh;
            width: 100vw;
        }
    </style>

</head>

<body>
    <div id="map"></div>



    <script src="https://d3js.org/d3.v5.js"></script>

    <script>
        const stateGeoJson = d3.json('data/states.geojson')
        console.log(stateGeoJson)
        // select the HTML element that will hold our map
        const mapContainer = d3.select('#map')

        const width = mapContainer.node().offsetWidth;
        const height = mapContainer.node().offsetHeight;

        // determine width and height of map from container
        window.addEventListener("resize", () => {
            const width = mapContainer.node().offsetWidth;
            const height = mapContainer.node().offsetHeight;
            console.log(width, height)
        });


        // const width = mapContainer.node().offsetWidth;
        // const height = mapContainer.node().offsetHeight;



        // create and append a new SVG element to the map div
        const svg = mapContainer
            .append('svg')
            .attr('width', width) // provide width and height attributes
            .attr('height', height)
            // .append("circle")
            // .attr("cx", width/2).attr("cy", height/2).attr("r", height/2)
            // .style("fill", "purple");
        let n = 0
        let w = 0
        let h = 0
        const s = 1000
        const e = 4
        let data = []
        const i = 10000
        while (n < i) {
            let c = n/4 // n/(4/3*Math.PI)
            
            // console.log(Math.random())
            let x = (width/2 - (Math.cos(c)*((n/s)**e)))
            let y = (height/2 - (Math.sin(c)*((n/s)**e)))

            
            let w1 = x
            let h1 = y
            
            if (n == 0) {
                w = width/2 
                h = height/2
            }

            // console.log(w,h)
            
            let r = 100 + (155*Math.random())
            let g = 100 + (155*Math.random())
            let b = 100 + (155*Math.random())
            let hue = 60 + (n*4/i)*80// (360*Math.random()) //(n/i)*100
            let sat = 100
            let val = 50
            let a =  n/59000 // Math.random()
            data.push([w, h, `rgba(${r},${g},${b},${a})`, 50*Math.random()])
            svg.append('line')
            .attr("x1", w)
            .attr("y1", h)
            .attr("x2", w1)
            .attr("y2", h1)
            .style("stroke", `rgba(${r},${g},${b},${a})`)
            // .style("stroke", `hsla(${hue},${sat}%,${val}%,${a})`)
            .style("stroke-width", 10 /* *Math.random() */)
            .style("stroke-linecap", "round")
            w = x
            h = y
            n++
        }

        // line = d3.line()
        // .x(d => x(d[0]))
        // .y(d => y(d[1]))
        // line(data)

        // mapContainer.append('line')
        // .data(data)
        // .attr("x1", (d, i) => {
        //     console.log(d, i)
        //     return d[1]
        // })
        //     .attr("y1", d => {return  d[0]})
        //     .attr("x2", d => { return d[3]})
        //     .attr("y2", d => { return d[2]})
        //     .style("stroke", d => {d[4]})
        //     .style("stroke-width", 50*Math.random());

        // while (n<100000) {
        //     // console.log(Math.random())
        //     let x = (width/2 - (Math.cos(n)*((n/1000)**6)))
        //     let y = (height/2 - (Math.sin(n)*((n/1000)**6)))

            
        //     let w1 = x
        //     let h1 = y
            
        //     if (n == 0) {
        //         w = width/2 
        //         h = height/2
        //     }
            
        //     let r = 100 + (155*Math.random())
        //     let g = 100 + (155*Math.random())
        //     let b = 100 + (155*Math.random())
        //     let a = Math.random()
        //     svg.append('line')
        //     .attr("x1", w)
        //     .attr("y1", h)
        //     .attr("x2", w1)
        //     .attr("y2", h1)
        //     .style("stroke", `rgba(${r},${g},${b},${a})`)
        //     .style("stroke-width", 50*Math.random());
        //     w = w1
        //     h = h1
        //     n++
        // }
        
//       d3.select("body")
//   .selectAll("p")
//   .data([4, 8, 15, 16, 23, 42])
//   .enter().append("p")
//     .text(function(d) { return "I’m number " + d + "!"; });

//     // Update…
// var p = d3.select("body")
//   .selectAll("p")
//   .data([4, 8, 15, 16, 23, 42])
//   .style("margin", (d, i) => {
//   console.log(i)
//   return `${d}em`
// });

// d3.select("body").transition()
// .duration(1750)

//     .style("background-color", "gray");

    </script>
</body>

</html>